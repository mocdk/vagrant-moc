---
- hosts: all
  sudo: true
  vars:
    zsh_theme: robbyrussell
    apache_port: 8080

  handlers:
    - name: reload apache
      service: name=apache2 state=reloaded
    - name: restart php
      service: name=php5-fpm state=restarted
    - name: restart varnish
      service: name=varnish state=restarted
    - name: restart nfs
      service: name=nfs-common state=restarted

  tasks:
    - include: tasks/apt.yml
    - include: tasks/dotdeb.yml
    - include: tasks/backports.yml
    - include: tasks/phpapachefpm.yml
    - name: install mysql
      apt: name=mysql-server state=present
    - include: tasks/redis.yml
    - include: tasks/memcache.yml
    - name: install git
      apt: name=git-core
    - include: tasks/zsh.yml
    - include: tasks/varnish.yml
    - include: tasks/compass.yml
    - include: tasks/nodejs.yml
    - include: tasks/nfsserver.yml
    - include: tasks/grunt.yml


# Mangler
# * Opgradering til Apache 2.4 !!!
# * [DONE] Varnish
# * Stillingtagen til php-fpm brugere (default www-data, skal det hellere v√¶re vagrant?)
# * [DONE] NFS mounts
# * php-fpm instillinger
# * Tomcat + Solr
# * Elasticsearch
# * Beanstalkd
# * Supervisor?
# * [DONE] zsh med oh-my-zsh
# * Std. pakker (vim, emacs htop etc)
# * [DONE] npm
# * [DONE] grunt
# * [DONE] compass
# * [DONE] git! (I nyere version?)
# * mongo
# * Refactor tasks to roles pattern